<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/WEB-INF/templates/main-template.xhtml">        
        <ui:param name="pageTitle" value="Admin Page"/>
        <ui:define name="main-content">
            <p></p>
            <b:form id="createCourseForm">

                <h:outputLabel for="contractPersons" value="Create Contract of : " />
                <b:selectOneMenu id="contractPersons" value="#{createContractBean.contractTo}" immediate="true">
                    <f:selectItem itemLabel="Choose person" noSelectionOption="true"/>
                    <f:selectItems  value="#{createContractBean.persons}" var="entity" itemLabel="#{entity.firstName} #{entity.lastName}" itemValue="#{entity}"/>
                    <f:ajax render="firstNameInput lastNameInput emailAddressInput" />
                </b:selectOneMenu>           

                <b:inputText id="firstNameInput" label="First Name"
                             value="#{createContractBean.contractTo.firstName}"
                             required="false" disabled = "true">
                </b:inputText>

                <b:inputText id="lastNameInput" label="Last Name"
                             value="#{createContractBean.contractTo.lastName}"
                             required="false" disabled = "true">
                </b:inputText>

                <b:inputText id="emailAddressInput" label="Email"
                             value="#{createContractBean.contractTo.emailAddress}"
                             required="false" disabled = "true">
                </b:inputText>

                <h:panelGrid columns="1" cellpadding="10">
                    <h:outputLabel for="multiple" value="Select Roles " />
                    <p:selectCheckboxMenu id="multiple" value="#{createContractBean.selectedRoleTypes}" label="roles"
                                          multiple="true" filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                        <f:selectItems value="#{roleTypeBean.roleTypes}" var = "t" itemDisabled="#{t == 'SUPERVISOR' ? 'true' : 'false'}"/>
                    </p:selectCheckboxMenu>           
                </h:panelGrid>

                <h:outputLabel for="roleType" value="Choose Role " />
                <b:selectOneMenu id="roleType" value="#{createContractBean.roleType}" immediate="true">
                    <f:selectItem itemLabel="Choose role" noSelectionOption="true"/>
                    <f:selectItems  value="#{roleTypeBean.roleTypes}"/>
                    <f:ajax render="firstNameInput lastNameInput emailAddressInput" />
                </b:selectOneMenu>   
                <b:commandButton id="createContractButton"
                                 look="success"
                                 icon="ok"
                                 value="Create Contract"
                                 action="courselist"
                                 actionListener="#{createContractBean.newContractInit}"/>
            </b:form>                   

        </ui:define>
    </ui:composition>
</html>

